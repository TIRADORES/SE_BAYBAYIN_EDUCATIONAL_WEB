<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Baybayin Quiz & Translator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Tagalog&display=swap');

    .noto-sans-tagalog-regular {
      font-family: "Noto Sans Tagalog", sans-serif;
      font-weight: 400;
      font-style: normal;
    }

    body {
      display: flex;
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fafafa;
      color: #333;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: 240px;
      background: #fff;
      border-right: 1px solid #ddd;
      padding: 20px;
      display: flex;
      flex-direction: column;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 2;
    }

    .sidebar h2 {
      font-size: 22px;
      margin-bottom: 20px;
    }

    .nav {
      flex: 1;
    }

    .nav a {
      display: block;
      padding: 10px 0;
      color: #000;
      text-decoration: none;
      font-weight: bold;
      margin-bottom: 5px;
      border-radius: 5px;
      transition: 0.3s;
    }

    .nav a.active {
      color: black;
    }

    .nav a:hover {
      color: #fff;
      background: black;
      border-radius: 5px;
      padding-left: 10px;
    }

    .user-section {
      margin-top: 20px;
      font-size: 14px;
      border-top: 1px solid #ddd;
      padding-top: 15px;
    }

    .user-section a {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 15px;
      background: black;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-size: 14px;
    }

    /* Background Video */
    .bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    /* Main Content */
    .main {
      flex: 1;
      margin-left: 240px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      z-index: 1;
    }

    /* Container */
    .container {
      text-align: center;
      background: rgba(255, 255, 255, 0.9);
      padding: 30px;
      border-radius: 20px;
      width: 600px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }

    h1, h2 {
      margin-bottom: 20px;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 15px;
      margin: 10px 0;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: 0.3s;
    }

    .btn:hover { opacity: 0.9; }

    .green { background: #4CAF50 !important; color: white; }
    .red { background: #f44336 !important; color: white; }
    .blue { background: #2196F3; color: white; }
    .yellow { background: #ffc107; color: white; }

    .menu-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .top-row {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .start-btn {
      background: #2196F3;
      color: #fff;
      font-size: 18px;
      border-radius: 12px;
      padding: 12px 25px;
      cursor: pointer;
      border: 2px solid #0d6efd;
      transition: all 0.3s ease;
      min-width: 220px;
      text-align: left;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
    }

    .start-btn:hover {
      background: #0d6efd;
      transform: scale(1.03);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
    }

    .translator-btn {
      margin-top: 5px;
      background: #ff6f00;
      border-color: #ff6f00;
    }

    .translator-btn:hover {
      background: #e65c00;
      transform: scale(1.03);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
    }

    .choices { margin-top: 20px; }

    .result h2 {
      font-size: 28px;
      margin-bottom: 15px;
    }

    .score {
      font-size: 20px;
      margin-bottom: 20px;
    }

    .restart-btn, .back-btn {
      background: #4CAF50;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      margin-top: 20px;
    }

    .restart-btn:hover, .back-btn:hover {
      background: #45a049;
    }

    textarea {
      width: 100%;
      height: 100px;
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      font-size: 16px;
      resize: none;
      outline: none;
      transition: border 0.3s;
    }

    textarea:focus { border-color: #000; }

    .translate-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background: #000;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }

    .translate-btn:hover { background: #333; }

    .output {
      margin-top: 25px;
      padding: 15px;
      background: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 10px;
      min-height: 60px;
      font-size: 28px;
      color: #000;
      white-space: pre-wrap;
      font-family: "Noto Sans Tagalog", sans-serif;
    }

    .footer {
      font-size: 13px;
      color: #777;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <video autoplay muted loop playsinline class="bg-video">
    <source src="assets/Game_BG.mp4" type="video/mp4">
  </video>

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>Baybayin.com</h2>
    </div>

    <div class="nav">
      <a href="home.html">Home</a>
      <a href="lessons.html">Lessons</a>
      <a href="fashion.html">Fashion Trend</a>
      <a href="about.html">About Us</a>
      <a href="govnews.html">Government News</a>
      <a href="quiz.html" class="active">Assessment</a>
    </div>

    <!-- Dynamic user info -->
    <div class="user-section" id="userSection">
      <p><strong id="userFullname">Loading...</strong><br>
        <small id="userEmail"></small>
      </p>
      <a href="#" id="logoutBtn">Logout</a>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main">
    <div class="container" id="menu">
      <h1>QUIZ BAYBAYIN</h1>
      <div class="menu-buttons">
        <div class="top-row">
          <button class="start-btn" onclick="startQuiz('history')">üìú History of Baybayin</button>
          <button class="start-btn" onclick="startQuiz('letters')">üî§ Baybayin Letters</button>
        </div>
        <button class="start-btn translator-btn" onclick="startQuiz('translator')">üà∂ Baybayin Translator</button>
      </div>
    </div>

    <div class="container" id="quiz" style="display:none;">
      <h2 id="question"></h2>
      <div id="baybayinChar" class="noto-sans-tagalog-regular" style="font-size:50px; margin-bottom:15px;"></div>
      <div class="choices" id="choices"></div>
      <p id="progress"></p>
      <button class="back-btn" onclick="backToMenu()">‚¨Ö Back to Menu</button>
    </div>

    <div class="container" id="translator" style="display:none;">
      <h2>Filipino to Baybayin Translator</h2>
      <textarea id="filipinoText" placeholder="Type Filipino text here..."></textarea>
      <button class="translate-btn" onclick="translateToBaybayin()">Translate</button>
      <div class="output" id="output">Your Baybayin translation will appear here...</div>
      <div class="footer">¬© 2025 Baybayin.com | Developed by Kitler ‚ú®</div>
      <button class="back-btn" onclick="backToMenu()">‚¨Ö Back to Menu</button>
    </div>

    <div class="container result" id="result" style="display:none;">
      <h2>üéâ Quiz Completed!</h2>
      <p class="score" id="score"></p>
      <button class="restart-btn" onclick="restartQuiz()">üîÅ Restart Quiz</button>
      <button class="back-btn" onclick="backToMenu()">‚¨Ö Back to Menu</button>
    </div>
  </div>

  <script>
    /* ===== User Login Info ===== */
    const currentUser = JSON.parse(localStorage.getItem("currentUser"));
    const userFullname = document.getElementById("userFullname");
    const userEmail = document.getElementById("userEmail");
    const logoutBtn = document.getElementById("logoutBtn");

    if (currentUser) {
      userFullname.textContent = currentUser.fullname;
      userEmail.textContent = currentUser.email;
    } else {
      window.location.href = "login.html";
    }

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("currentUser");
      window.location.href = "login.html";
    });

    /* ===== Quiz Data ===== */
    const historyQuestions = [
      { question: "Baybayin is a writing system used in?", answers: ["Philippines", "Japan", "Thailand", "China"], correct: 0 },
      { question: "Baybayin is considered a type of?", answers: ["Alphabet", "Syllabary", "Hieroglyphs", "Runes"], correct: 1 },
      { question: "What century was Baybayin widely used?", answers: ["14th‚Äì18th century", "5th‚Äì7th century", "19th century", "21st century"], correct: 0 },
      { question: "Which colonizers tried to suppress Baybayin?", answers: ["Spanish", "British", "Japanese", "Americans"], correct: 0 },
      { question: "Who documented Baybayin in 1593?", answers: ["Antonio Pigafetta", "Pedro Chirino", "Magellan", "Juan de Plasencia"], correct: 3 }
    ];

    const letterQuestions = [
      { question: "Identify the Baybayin character", baybayin: "·úÄ", answers: ["a", "ka", "la", "ba"], correct: 0 },
      { question: "Identify the Baybayin character", baybayin: "·úä", answers: ["ka", "o", "ge/gi", "ba"], correct: 3 },
      { question: "Identify the Baybayin character", baybayin: "·úÉ", answers: ["ba", "ka", "la", "ta"], correct: 1 },
      { question: "Identify the Baybayin character", baybayin: "·úÑ", answers: ["ga", "ha", "ma", "sa"], correct: 0 }
    ];

    let currentQuiz = [];
    let currentQuestionIndex = 0;
    let score = 0;

    function startQuiz(type) {
      document.getElementById("menu").style.display = "none";
      document.getElementById("quiz").style.display = "none";
      document.getElementById("translator").style.display = "none";
      document.getElementById("result").style.display = "none";

      if (type === "translator") {
        document.getElementById("translator").style.display = "block";
      } else {
        document.getElementById("quiz").style.display = "block";
        currentQuiz = type === "history" ? historyQuestions : letterQuestions;
        currentQuestionIndex = 0;
        score = 0;
        showQuestion();
      }
    }

    function showQuestion() {
      const q = currentQuiz[currentQuestionIndex];
      document.getElementById("question").innerText = q.question;
      const choicesDiv = document.getElementById("choices");
      const baybayinDiv = document.getElementById("baybayinChar");

      if (q.baybayin) {
        baybayinDiv.innerText = q.baybayin;
        baybayinDiv.style.display = "block";
      } else {
        baybayinDiv.style.display = "none";
      }

      choicesDiv.innerHTML = "";
      q.answers.forEach((ans, i) => {
        const btn = document.createElement("button");
        btn.innerText = ans;
        btn.classList.add("btn", ["yellow", "green", "blue", "red"][i]);
        btn.onclick = () => checkAnswer(i, btn);
        choicesDiv.appendChild(btn);
      });

      document.getElementById("progress").innerText =
        `Question ${currentQuestionIndex + 1} of ${currentQuiz.length}`;
    }

    function checkAnswer(selected, btn) {
      const q = currentQuiz[currentQuestionIndex];
      const buttons = document.querySelectorAll(".btn");
      if (selected === q.correct) {
        btn.classList.add("green");
        score++;
      } else {
        btn.classList.add("red");
        buttons[q.correct].classList.add("green");
      }
      buttons.forEach(b => b.disabled = true);

      setTimeout(() => {
        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuiz.length) showQuestion();
        else showResult();
      }, 1200);
    }

    function showResult() {
      document.getElementById("quiz").style.display = "none";
      document.getElementById("result").style.display = "block";
      document.getElementById("score").innerText = `You scored ${score} out of ${currentQuiz.length}!`;
    }

    function restartQuiz() {
      document.getElementById("result").style.display = "none";
      document.getElementById("menu").style.display = "block";
    }

    function backToMenu() {
      document.getElementById("quiz").style.display = "none";
      document.getElementById("translator").style.display = "none";
      document.getElementById("result").style.display = "none";
      document.getElementById("menu").style.display = "block";
    }

    /* ===== Translator Function ===== */
    const baybayinMap = {
      'a':'·úÄ','e':'·úÅ','i':'·úÅ','o':'·úÇ','u':'·úÇ',
      'ka':'·úÉ','ba':'·úä','ga':'·úÑ','ha':'·úë','la':'·úé','ma':'·úã',
      'na':'·úà','pa':'·úâ','sa':'·úê','ta':'·úÜ','wa':'·úè','ya':'·úå','ng':'·úÖ·úî'
    };

    function translateToBaybayin() {
      let text = document.getElementById("filipinoText").value.toLowerCase();
      let output = "";
      while (text.length > 0) {
        let match = false;
        for (let key of Object.keys(baybayinMap).sort((a,b)=>b.length-a.length)) {
          if (text.startsWith(key)) {
            output += baybayinMap[key];
            text = text.slice(key.length);
            match = true;
            break;
          }
        }
        if (!match) {
          output += text[0];
          text = text.slice(1);
        }
      }
      document.getElementById("output").textContent = output || "No input given.";
    }
  </script>
</body>
</html>
